<UserControl xmlns="https://github.com/avaloniaui" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:vm="using:QuadroApp.ViewModels" xmlns:m="using:QuadroApp.Model.DB" x:Class="QuadroApp.Views.KlantenView" x:DataType="vm:KlantenViewModel" Background="#F5F5F5">
	<Grid RowDefinitions="Auto,*,Auto">
		<!-- â–‘â–‘ HEADER â–‘â–‘ -->
		<Border Grid.ColumnSpan="2" Background="#444A50" Height="70">
			<DockPanel LastChildFill="False" Margin="20,0">
				<StackPanel DockPanel.Dock="Left" Orientation="Horizontal" VerticalAlignment="Center" Spacing="10">
					<Ellipse Width="35" Height="35" Fill="#F5C242"/>
					<TextBlock Text="QUADRO" Foreground="White" FontWeight="Bold" FontSize="20" VerticalAlignment="Center"/>
					<TextBlock Text="KLANTENBEHEER" Foreground="#CCC" FontSize="13" Margin="5,0,0,0" VerticalAlignment="Center"/>
				</StackPanel>
				<Button Content="â¬…ï¸ Terug" Command="{Binding GaTerugCommand}" DockPanel.Dock="Right" VerticalAlignment="Top" HorizontalAlignment="Right" Margin="0,10,10,0" Background="#F5C242" Foreground="#222" FontWeight="Bold" CornerRadius="8" Padding="10,5" Width="100" Height="32"/>
			</DockPanel>
		</Border>
		<!-- â–‘â–‘ MAIN CONTENT â–‘â–‘ -->
		<StackPanel Grid.Row="1" Margin="20" Spacing="14">
			<TextBlock Text="ðŸ‘¥ Klantenbeheer" FontSize="24" FontWeight="Bold" Foreground="#222" Margin="0,0,0,4"/>
			<!-- Toolbar -->
			<StackPanel Orientation="Horizontal" Spacing="10" Margin="0,0,0,10">
				<TextBox Width="260" Watermark="Zoek klantâ€¦" Text="{Binding Zoekterm, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
				<Button Content="ðŸ“‚ Open" Command="{Binding OpenKlantDetailCommand}" CommandParameter="{Binding SelectedKlant}" Classes="MainBtn"/>
				<Button Content="âž• Nieuw" Command="{Binding NewCommand}" Classes="MainBtn"/>
				<Button Content="âœï¸ Bewerken" Command="{Binding EditCommand}" Classes="MainBtn"/>
				<Button Content="ðŸ—‘ï¸ Verwijderen" Command="{Binding DeleteCommand}" Classes="MainBtn"/>
				<Button Content="ðŸ’¾ Opslaan" Command="{Binding SaveCommand}" Classes="MainBtn"/>
				<Button Content="ðŸ”„ Ververs" Command="{Binding RefreshCommand}" Classes="MainBtn"/>
				<Button Content="ðŸ“¥ Excel import" Command="{Binding ImportExcelCommand}" Classes="MainBtn"/>
			</StackPanel>
			<Grid ColumnDefinitions="2*,2.5*,1.5*,3*,2*,3*,Auto" Margin="6,0,6,6">
				<TextBlock Text="Naam" Grid.Column="0" FontWeight="Bold" Foreground="#000"/>
				<TextBlock Text="Email" Grid.Column="1" FontWeight="Bold" Foreground="#000"/>
				<TextBlock Text="Telefoon" Grid.Column="2" FontWeight="Bold" Foreground="#000"/>
				<TextBlock Text="Opmerking" Grid.Column="3" FontWeight="Bold" Foreground="#000"/>
				<TextBlock Text="Btw-nummer" Grid.Column="4" FontWeight="Bold" Foreground="#000"/>
				<TextBlock Text="Adres" Grid.Column="5" FontWeight="Bold" Foreground="#000"/>
				<TextBlock Text="Actie" Grid.Column="6" FontWeight="Bold" Foreground="#000" HorizontalAlignment="Right"/>
			</Grid>
			<Border BorderBrush="#DDD" BorderThickness="1" CornerRadius="8" Background="White">
				<ListBox ItemsSource="{Binding FilteredKlanten}" SelectedItem="{Binding SelectedKlant, Mode=TwoWay}" BorderThickness="0" Background="Transparent" ScrollViewer.VerticalScrollBarVisibility="Auto" DoubleTapped="KlantenList_DoubleTapped">
					<ListBox.Styles>
						<Style Selector="ListBoxItem">
							<Setter Property="CornerRadius" Value="6"/>
							<Setter Property="Margin" Value="0,0,0,6"/>
							<Setter Property="Padding" Value="8"/>
							<Setter Property="Background" Value="Transparent"/>
						</Style>
						<Style Selector="ListBoxItem:pointerover">
							<Setter Property="Background" Value="#FFF7DA"/>
						</Style>
						<Style Selector="ListBoxItem:selected">
							<Setter Property="Background" Value="#FFF3BF"/>
							<Setter Property="BorderBrush" Value="#F5C242"/>
							<Setter Property="BorderThickness" Value="1"/>
						</Style>
					</ListBox.Styles>
					<ListBox.ItemTemplate>
						<DataTemplate x:DataType="m:Klant">
							<Grid ColumnDefinitions="2*,2.5*,1.5*,3*,2*,3*,Auto" VerticalAlignment="Center" ColumnSpacing="8">
								<StackPanel Grid.Column="0">
									<TextBlock Text="{Binding Voornaam, TargetNullValue='', FallbackValue=''}" Foreground="#222" FontSize="15" FontWeight="Bold" TextTrimming="CharacterEllipsis"/>
									<TextBlock Text="{Binding Achternaam, TargetNullValue='', FallbackValue=''}" Foreground="#555" FontSize="13" TextTrimming="CharacterEllipsis"/>
								</StackPanel>
								<TextBlock Grid.Column="1" Text="{Binding Email, TargetNullValue='', FallbackValue=''}" Foreground="#333" VerticalAlignment="Center" TextTrimming="CharacterEllipsis"/>
								<TextBlock Grid.Column="2" Text="{Binding Telefoon, TargetNullValue='', FallbackValue=''}" Foreground="#333" VerticalAlignment="Center" TextTrimming="CharacterEllipsis"/>
								<TextBlock Grid.Column="3" Text="{Binding Opmerking, TargetNullValue='', FallbackValue=''}" Foreground="#666" FontStyle="Italic" VerticalAlignment="Center" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis"/>
								<TextBlock Grid.Column="4" Text="{Binding BtwNummer, TargetNullValue='', FallbackValue=''}" Foreground="#333" VerticalAlignment="Center" TextTrimming="CharacterEllipsis"/>
								<StackPanel Grid.Column="5">
									<TextBlock Foreground="#333" TextTrimming="CharacterEllipsis">
										<TextBlock.Text>
											<MultiBinding StringFormat="{}{0}, {1}">
												<Binding Path="Straat" TargetNullValue=""/>
												<Binding Path="Nummer" TargetNullValue=""/>
											</MultiBinding>
										</TextBlock.Text>
									</TextBlock>
									<TextBlock Foreground="#666" FontSize="13" TextTrimming="CharacterEllipsis">
										<TextBlock.Text>
											<MultiBinding StringFormat="{}{0}, {1}">
												<Binding Path="Postcode" TargetNullValue=""/>
												<Binding Path="Gemeente" TargetNullValue=""/>
											</MultiBinding>
										</TextBlock.Text>
									</TextBlock>
								</StackPanel>
								<StackPanel Grid.Column="6" Orientation="Horizontal" Spacing="6" HorizontalAlignment="Right">
									<!-- BELANGRIJK: CommandParameter werkt nu omdat VM overloads heeft -->
									<Button Content="âœï¸" Width="32" Height="30" Background="#444A50" Foreground="White" Command="{Binding $parent[UserControl].DataContext.EditCommand}" CommandParameter="{Binding}"/>
									<Button Content="ðŸ—‘ï¸" Width="32" Height="30" Background="#AA3333" Foreground="White" Command="{Binding $parent[UserControl].DataContext.DeleteCommand}" CommandParameter="{Binding}"/>
								</StackPanel>
							</Grid>
						</DataTemplate>
					</ListBox.ItemTemplate>
				</ListBox>
			</Border>
			<TextBlock Text="{Binding FilteredKlanten.Count, StringFormat='Aantal geladen klanten: {0}'}" HorizontalAlignment="Center" Foreground="#666" Margin="0,6,0,0"/>
		</StackPanel>
		<Border Grid.Row="2" Background="#F5F5F5" Padding="8">
			<TextBlock Text=" " />
		</Border>
	</Grid>
	<UserControl.Styles>
		<Style Selector="Button.MainBtn">
			<Setter Property="Background" Value="#444A50"/>
			<Setter Property="Foreground" Value="White"/>
			<Setter Property="FontWeight" Value="Bold"/>
			<Setter Property="CornerRadius" Value="8"/>
			<Setter Property="BorderBrush" Value="Transparent"/>
			<Setter Property="FontSize" Value="15"/>
			<Setter Property="Padding" Value="10,5"/>
		</Style>
		<Style Selector="Button.MainBtn:pointerover">
			<Setter Property="Background" Value="#F5C242"/>
			<Setter Property="Foreground" Value="#222"/>
		</Style>
	</UserControl.Styles>
</UserControl>